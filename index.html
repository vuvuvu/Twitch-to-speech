<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch-to-speech</title>
    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <!-- Permanent Navigation Header -->
    <nav class="nav-header">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="nav-logo">üé§</span>
                <span class="nav-title">TTS Chat</span>
            </div>
            <div class="nav-center">
                <button class="chat-toggle" id="chatToggle">
                    <span class="chat-icon">üí¨</span>
                    <span class="chat-text">Live Chat</span>
                    <span class="chat-indicator" id="chatIndicator">0</span>
                </button>
            </div>
            <div class="nav-links">
                <a href="#connect" class="nav-link">Connect</a>
                <a href="#chat" class="nav-link">Chat</a>
                <a href="#controls" class="nav-link">Controls</a>
                <a href="#settings" class="nav-link">Settings</a>
                <a href="#stats" class="nav-link">Stats</a>
            </div>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Collapsible Chat Panel -->
    <div class="chat-panel" id="chatPanel">
        <div class="chat-panel-header">
            <div class="chat-panel-title">
                <span class="chat-panel-icon">üí¨</span>
                <span>Live Chat</span>
                <span class="chat-panel-status" id="chatPanelStatus">Disconnected</span>
            </div>
            <div class="chat-panel-controls">
                <button class="chat-panel-btn" id="chatClearBtn" title="Clear Chat">üóëÔ∏è</button>
                <button class="chat-panel-btn" id="chatPauseBtn" title="Pause TTS">‚è∏Ô∏è</button>
                <button class="chat-panel-close" id="chatPanelClose">‚úï</button>
            </div>
        </div>
        <div class="chat-panel-content">
            <div class="chat-panel-display" id="chatPanelDisplay">
                <div class="chat-panel-placeholder">
                    <span class="placeholder-icon">üí¨</span>
                    <p>Connect to a Twitch channel to see live chat messages</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Panel Overlay -->
    <div class="chat-panel-overlay" id="chatPanelOverlay"></div>

    <div class="main-content">
        <div class="header-text">
            <h1>Twitch Chat Text-to-Speech</h1>
            <i><p>made with üí© by <a href="https://github.com/vuvuvu" target="_blank" rel="noopener"><b>vU_Vu</b></a></i></p>
        </div>

        <section id="connect" class="section">
            <div class="twitch-connect">
                <label for="channel">Twitch Channel:</label>
                <input type="text" id="channel" placeholder="Enter channel name">
                <button id="connectBtn">Connect</button>
            </div>

            <div id="error" class="message-display"></div>
            <div id="status" class="message-display"></div>
        </section>
        
        <section id="chat" class="section">
            <div class="chat-display" id="chatDisplay">
                <!-- Chat messages will appear here -->
            </div>
        </section>

        <section id="controls" class="section">
            <div class="controls-section">
                <div class="control-group">
                    <label for="rate">Rate: <span id="rateValue">1.0</span></label>
                    <input type="range" id="rate" min="0.5" max="2.0" value="1.0" step="0.1">
                </div>
                <div class="control-group">
                    <label for="pitch">Pitch: <span id="pitchValue">0.8</span></label>
                    <input type="range" id="pitch" min="0" max="2" value="0.8" step="0.1">
                </div>
                <div class="control-group">
                    <label for="volume">Volume: <span id="volumeValue">0.8</span></label>
                    <input type="range" id="volume" min="0" max="1" value="0.8" step="0.1">
                </div>
                <div class="control-group">
                    <label for="voiceSelect">Voice:</label>
                    <select id="voiceSelect">
                        <option value="random">Random Assignment</option>
                    </select>
                </div>
            </div>
        </section>

        <section id="settings" class="section">
            <div class="muted-users">
                <div class="muted-users-input">
                    <label for="mutedUsers">Muted Users:</label>
                    <input type="text" id="mutedUsers" placeholder="streamelements, songlistbot, nightbot" value="streamelements">
                    <button id="updateMutedBtn">Update</button>
                </div>
                <div id="mutedUsersDisplay" class="muted-users-list"></div>
            </div>

            <div class="action-buttons">
                <button id="pauseBtn">Pause TTS</button>
                <button id="clearQueueBtn">Clear Queue</button>
                <button id="clearChatBtn">Clear Chat</button>
                <button id="exportSettingsBtn">Export Settings</button>
                <input type="file" id="importSettingsInput" accept=".json" style="display: none;">
                <button id="importSettingsBtn">Import Settings</button>
            </div>
        </section>

        <section id="stats" class="section">
            <div class="stats-section">
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Messages:</span>
                        <span id="messageCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Queue:</span>
                        <span id="queueCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Users:</span>
                        <span id="userCount">0</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>